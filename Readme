ğŸ”¥ Firecrawl MCP Agent â€” Web Scraping & Crawling via LangGraph
This project implements an intelligent agent capable of scraping websites, crawling pages, and extracting structured data using Firecrawl MCP tools.
It uses:
LangGraph ReAct Agent
OpenAI GPT-4o-mini
MCP (Model Context Protocol) Tools
Firecrawl MCP Server
Async Python runtime
The agent runs in your terminal and dynamically decides when to call Firecrawl tools to gather web data.

ğŸš€ Features
ğŸ•·ï¸ Scrape pages using Firecrawl's MCP tools
ğŸŒ Crawl full websites
ğŸ“„ Extract structured data (JSON, markdown, text, etc.)
ğŸ¤– Uses ReAct reasoning to choose the right tool
ğŸ”Œ MCP protocol used for remote tool communication
â±ï¸ Fully asynchronous for high performance
ğŸ“¦ Requirements
Environment

Python 3.10+
Node.js installed
Firecrawl MCP package (npx firecrawl-mcp)
.env file with required API keys
Python libraries
pip install mcp langchain_mcp_adapters langgraph langchain-openai python-dotenv

ğŸ”‘ Environment Variables
Create a .env file:

OPENAI_API_KEY=your_openai_key
FIRECRAWL_API_KEY=your_firecrawl_key

ğŸ› ï¸ How It Works
The script loads your OpenAI model.
It starts the Firecrawl MCP server using:
npx firecrawl-mcp
MCP tools are loaded dynamically.
A ReAct agent is created using LangGraph.
The terminal enters a chat-loop, where the agent:
Reads user input
Processes with reasoning
Calls Firecrawl tools when needed
Returns formatted results

ğŸ“œ Code Overview
ğŸ”§ Agent Setup
model = ChatOpenAI(
    model_name="gpt-4o-mini",
    temperature=0,
    openai_api_key=os.getenv("OPENAI_API_KEY")
)

ğŸ”Œ MCP Server Parameters
server_params = StdioServerParameters(
    command="npx",
    env={"FIRECRAWL_API_KEY": os.getenv("FIRECRAWL_API_KEY")},
    args=["firecrawl-mcp"]
)

ğŸ¤– Create LangGraph ReAct Agent
agent = create_react_agent(model, tools)

ğŸ—£ï¸ Terminal Chat Loop

The program waits for user messages and responds:

while True:
    user_input = input("\nYou: ")
    response = await agent.ainvoke({"messages" : messages})

â–¶ï¸ Run the Agent
python main.py

ğŸ§ª Example Prompts
Scrape https://example.com and summarize the main content.

Crawl https://wikipedia.org and extract all internal URLs.

Convert the scraped data into structured JSON.

ğŸ“‚ Project Structure
/project
â”‚â”€â”€ main.py
â”‚â”€â”€ .env
â”‚â”€â”€ README.md

â— Troubleshooting
Error: ModuleNotFoundError
Ensure MCP modules are installed:
npm install -g firecrawl-mcp
Stuck waiting for response
Some terminals block async I/O. Run in a clean console (CMD, PowerShell, or VSCode).

ğŸ“Œ Notes & Tips
Firecrawl API key is required for scraping/crawling.
Keep messages short (<175k chars) due to model limits.
Use quit inside the terminal to exit the agent.
